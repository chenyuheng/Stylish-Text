<html>
	<head>
		<title>风格文本 / Stylish Text</title>
		<meta charset="UTF-8">
		<script type="text/javascript">
			function Pattern(name){
				this.name=name;
				this.dict = [];
			}
			Pattern.prototype.translation = function(origin){
				var i;
				var newText="";
				for(i=0;i<origin.length;i++){
					if(this.dict[origin.charAt(i)]!==undefined){
						newText+=this.dict[origin.charAt(i)];
					}else{
						newText+=origin.charAt(i);
					}
				}
				return newText;
			}

			function getJson(url) {
				var httpreq = new XMLHttpRequest();
				httpreq.open("GET", url, false);
				httpreq.send(null);
				var jsonObj = JSON.parse(httpreq.responseText);
				return jsonObj;
			}

			function run(){
				var originText = document.getElementById("originText").value;
				var tempPattern = new Pattern("underdot");
				var url = "https://nju.wiki/style.json";
				tempPattern.dict = getJson(url)[0];
				var after = tempPattern.translation(originText);
				document.getElementById("output").innerHTML = after;
			}

		</script>
	</head>
	
	<body>
		<p>Currently only one style: ḍọṭṭẹḍ ṭẹx̣ṭ</p>
		<p>
			原文 / Original Text:<br />
			<textarea rows="10" cols="50" id="originText">The original text here</textarea>
		</p>
		<button type="button" onclick="run()">提交 / Submit</button>
		<p>
			转换后 / Transformed Text:<br />
			<div id="output">Ṭḥẹ ọṛịg̣ịṇạḷ ṭẹx̣ṭ ḥẹṛẹ</div>
		</p>
	</body>
</html>